# 裁判系统模块

---

## 简介

这是整个代码库的裁判系统模块，根据串口接收的数据解析出相应的数据将其广播出去，同时根据其他模块请求绘制的ui信息发送给裁判系统完成ui绘制


## 项目文件及依赖项

- 本项目文件
	- `softbus.c/h`、`config.c/h`、`sys_conf.h`、`judge_drive.c/h`、`my_queue.c/h`
- 标准库文件
	- `stdint.h`、`stdbool.h`
- hal库文件 
    - `cmsis_os.h`

---

> 注：下面远程函数所写的数据类型为指针的项仅强调该项传递的应该是数组，实际传递的参数只需数组名即可，不需要传递数组名的地址。广播也是如此，所写的数据类型若为指针的仅强调该项传递的应该是数组，获取该项的值是仅需要强制类型转换成相应的指针即可，无需额外解引用

---

## 说明

本裁判系统模块会根据从裁判系统获取的部分数据，选择性的广播该类型所需要的数据

## 在`sys_conf.h`中的配置

```c
{"judge",CF_DICT{
	{"maxTxQueueLength",IM_PTR(uint16_t,20)},
	{"taskInterval",IM_PTR(uint16_t,150)},
	{"uart-x",IM_PTR(uint8_t,6)},
	CF_DICT_END
}},
```

## 模块接口

> 注：name重映射只需要在配置表中配置名写入原本name字符串，在配置值处写入重映射后的name字符串，就完成了name的重映射。例如：`{"old-name", "new-name"},`

- 广播：无

- 远程函数
  
    1. `/chassis/speed`

        说明：设置底盘在用户坐标系下的速度

        **是否允许name重映射：允许**

        传入参数数据：

        | 数据字段名 | 数据类型 | 是否为返回值 | 是否必须传输 | 说明 |
        | :---: | :---: | :---: | :---: | :---: |
        | `vx` | `float` | × | 可选 | 底盘在用户坐标系下x轴方向的速度(单位mm/s) |
        | `vy` | `float` | × | 可选 | 底盘在用户坐标系下y轴方向的速度(单位mm/s) |
        | `vw` | `float` | × | 可选 | 底盘旋转的角速度(单位°/s)  |
    
    2. `/chassis/acc`

        说明：设置底盘在用户坐标系下的加速度

        **是否允许name重映射：允许**

        传入参数数据：

        | 数据字段名 | 数据类型 | 是否为返回值 | 是否必须传输 | 说明 |
        | :---: | :---: | :---: | :---: | :---: |
        | `ax` | `float` | × | 可选 | 底盘在用户坐标系下x轴方向的加速度(单位mm/s²) |
        | `ay` | `float` | × | 可选 | 底盘在用户坐标系下y轴方向的加速度(单位mm/s²) |
    
    3. `/chassis/relativeAngle`

        说明：设置用户坐标系和底盘坐标系的分离角

        **是否允许name重映射：允许**

        传入参数数据：

        | 数据字段名 | 数据类型 | 是否为返回值 | 是否必须传输 | 说明 |
        | :---: | :---: | :---: | :---: | :---: |
        | `angle` | `float` | × | 必须 | 底用户坐标系和底盘坐标系的分离角(单位°/s) |
